/** * Selection between all the tshirts. Probably this info should be placed into * the setting file, so that when you click you put it over ther and who needs  * it can use it. *  **/  package com.ipnotica.content.blackboard.views.selector { 		import com.ipnotica.utils.Config;
	import com.ipnotica.utils.CustomEvents;
	import com.ipnotica.utils.Utils;
	
	import flash.display.MovieClip;
	import flash.events.Event;
	import flash.events.MouseEvent;
	import flash.text.TextField;	public class Selector extends MovieClip {				public var left:MovieClip;		public var right:MovieClip;		public var label:TextField;				public var index:uint = 1;			/**< default visible view (as the first is visible, we need to set the secon index of the array) */				public function Selector() {			super();			label.visible = false;		}				public function init():void {			(Config.views.length() > 1) ? activateNavigation() : deactivateNavigation();			changeLabel();		}						/** 		 * Activate navigation system (if there are more than 2 views)		 **/		 		private function activateNavigation():void {			left.buttonMode = right.buttonMode = true;			initEvents();		}					private function initEvents():void {			initOverEvents();			initClickEvents();		}		// mouse over effect		private function initOverEvents():void {			left.addEventListener(MouseEvent.MOUSE_OVER,  onOverLeft);			left.addEventListener(MouseEvent.MOUSE_OUT,   onOutLeft);			right.addEventListener(MouseEvent.MOUSE_OVER, onOverRight);			right.addEventListener(MouseEvent.MOUSE_OUT,  onOutRight);		}				private function onOverLeft(e:Event):void  { left.gotoAndStop(2);  }; 		private function onOutLeft(e:Event):void   { left.gotoAndStop(1);  }; 		private function onOverRight(e:Event):void { right.gotoAndStop(2); }; 		private function onOutRight(e:Event):void  { right.gotoAndStop(1); }; 		 				// mouse click view changes		private function initClickEvents():void {			left.addEventListener(MouseEvent.CLICK, onLeftClick);			right.addEventListener(MouseEvent.CLICK, onRightClick);		}				// move to previous view		public function onLeftClick(e:Event):void {			index--;			changeView();		}				// move to next view 		public function onRightClick(e:Event):void {			index++;			changeView();		}						/** 		 * Change view (not into the main view, but only in the preview) 		 **/ 		private function changeView():void {			changeViewID();			changeViewImage();			changeLabel();		}				// change view visible ID		private function changeViewID():void {			index = Math.abs(index % Config.views.length());			Config.viewVisibleID = Config.views[index].node.node.id;		}				// change image		private function changeViewImage():void {			Config.body.content.blackboard.views.showSelectedView();		}				// change label		private function changeLabel():void {			label.text = Utils.findView(Config.viewVisibleID).description;			label.visible = true;		}						/** 		 * Change product view 		 **/		public function changeProduct():void {			changeProductID();			changeProductImage();			Config.doc.dispatchEvent(new CustomEvents(CustomEvents.VIEW_CHANGED, {}));		}				// change product visible ID		private function changeProductID():void {			var productIndex:uint = index;			Config.productVisibleID = Config.views[productIndex].node.node.id;		}				// change product image		private function changeProductImage():void {			Config.body.content.blackboard.products.showSelectedView();		}						/** 		 * Deactivate navigation system		 **/		 private function deactivateNavigation():void {		 	left.gotoAndStop(3);			right.gotoAndStop(3);		 }		 		 			}}